package com.capstone.diabite.db

import com.capstone.diabite.BuildConfig
import com.capstone.diabite.db.responses.QuizRequest
import com.capstone.diabite.db.responses.QuizResponse

class QuizRepository {
    private val apiService = ApiClient.getApiService3()

    suspend fun generateTrivia(): QuizResponse {
        val quizRequest = QuizRequest(
            count = 5,
            difficulty = "EASY",
            text = "Diabetes is a chronic health condition that occurs when the body is unable to effectively regulate blood sugar (glucose) levels. Glucose is a vital energy source for the body's cells, but its levels need to be controlled within a specific range. There are two primary types of diabetes: Type 1 diabetes, an autoimmune condition where the immune system attacks insulin-producing beta cells in the pancreas, and Type 2 diabetes, characterized by insulin resistance, where the body does not respond effectively to insulin. Additionally, pre-diabetes refers to blood sugar levels that are higher than normal but not high enough to be diagnosed as diabetes, while gestational diabetes occurs during pregnancy and typically resolves after childbirth, although it may increase the risk of Type 2 diabetes later in life.\n" + "\n" + "Normal blood sugar levels generally range from less than 100 mg/dL (5.6 mmol/L) when fasting to less than 140 mg/dL (7.8 mmol/L) after eating. Hyperglycemia, or elevated blood sugar levels, can cause symptoms such as excessive thirst, frequent urination, and fatigue, while hypoglycemia, or low blood sugar, may lead to shakiness, dizziness, and confusion. The glycemic index (GI) measures how quickly foods raise blood sugar levels. Foods with a low GI, such as whole grains and legumes, cause slower, more stable changes in blood sugar, making them better for managing diabetes.\n" + "\n" + "Uncontrolled diabetes can lead to severe complications over time. Cardiovascular disease is common, increasing the risk of heart attack and stroke. Neuropathy, or nerve damage, particularly affects the legs and feet, while nephropathy, or kidney damage, can lead to kidney failure. Diabetic retinopathy damages the blood vessels in the eyes, potentially resulting in vision loss. These complications underscore the importance of early diagnosis and effective management.\n" + "\n" + "A balanced diet is critical for managing diabetes and maintaining healthy blood sugar levels. Choosing complex carbohydrates such as whole grains and vegetables, lean protein sources like fish and legumes, and healthy fats from avocados and nuts can significantly improve outcomes. High-fiber foods such as fruits and vegetables stabilize blood sugar, while proper hydration supports overall health. Conversely, sugary beverages, refined carbohydrates, and trans fats should be avoided or consumed in moderation.\n" + "\n" + "Lifestyle changes play a crucial role in diabetes management. Regular exercise improves insulin sensitivity, helping the body use glucose more effectively. Monitoring blood sugar levels ensures timely adjustments to diet or medication, while stress management techniques like meditation can prevent spikes in glucose levels. Smoking cessation and regular medical checkups further reduce the risk of complications and improve overall well-being.\n" + "\n" + "Several misconceptions surround diabetes. For example, many believe eating too much sugar directly causes diabetes, but genetics and lifestyle factors also play a significant role. Similarly, while excess weight increases the risk of Type 2 diabetes, people of any weight can develop the condition. Another common myth is that diabetics must avoid all fruits, but in moderation, fruits are a valuable source of vitamins and fiber.\n" + "\n" + "Preventing diabetes involves maintaining a healthy weight, consuming a balanced diet rich in whole foods, and engaging in regular physical activity. Limiting alcohol intake and avoiding smoking also reduce risk factors. For children, particularly those with Type 1 diabetes, education about their condition and fostering healthy habits are essential for lifelong management.\n" + "\n" + "Technology has become an integral part of diabetes management. Devices such as continuous glucose monitors (CGMs) provide real-time blood sugar tracking, while mobile apps assist with meal planning and medication reminders. Wearable technology, such as smartwatches, can monitor activity and alert users to abnormal glucose levels, enhancing disease management.\n" + "\n" + "Nutrition plays a central role in diabetes care. Regular meal times help stabilize blood sugar, while portion control prevents spikes caused by overeating. Learning to read nutritional labels aids in selecting healthier options, empowering individuals to make informed dietary choices. These strategies, combined with education and lifestyle changes, can significantly improve quality of life for those with diabetes.\n" + "\n" + "This comprehensive overview offers a foundation for creating engaging quizzes. Topics can include identifying blood sugar levels, debunking diabetes myths, analyzing meal plans, or exploring the role of exercise and technology in diabetes management. These quizzes can serve both to educate and reinforce critical knowledge about diabetes and related health topics."
        )

        return apiService.generateTrivia(
            quizRequest,
            apiKey = BuildConfig.QUIZ_API_KEY,
            apiHost = "ai-trivia-questions-generator.p.rapidapi.com"
        )
    }
}
